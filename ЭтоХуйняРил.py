"""
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•########################
    â•‘                                                                                      â•‘
    â•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•— â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â•‘
    â•‘      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â•‘
    â•‘      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•”â•â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
    â•‘      â–ˆâ–ˆâ•”â•â•â–ˆâ–ˆâ•—â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â–ˆâ–ˆ      â•‘
    â•‘      â–ˆâ–ˆâ•‘  â–ˆâ–ˆâ•‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ•‘
    â•‘      â•šâ•â•  â•šâ•â•â•šâ•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•â•šâ•â•â•â•â•â•â•šâ•â•â•â•â•â•â•šâ•â•â•â•â•â•â•šâ•â•â•â•â•â•â•‘
    â•‘                                                                                      â•‘
    â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
    â•‘                           ğŸ”¥ ULTIMATE WEB AUTOMATION SUITE ğŸ”¥                        â•‘
    â•‘                                                                                      â•‘
    â•‘  ğŸŒŸ FEATURES:                                    ğŸ¯ CAPABILITIES:                   â•‘
    â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
    â•‘  â”‚ ğŸ” Visual Search Engine             â”‚        â”‚ ğŸ“¸ Smart OCR Recognition        â”‚  â•‘
    â•‘  â”‚ ğŸ“± QR Code Scanner                  â”‚        â”‚ ğŸ¤– AI-Powered Navigation       â”‚  â•‘
    â•‘  â”‚ ğŸŒ Web Automation                   â”‚        â”‚ ğŸš€ Lightning Fast Performance   â”‚  â•‘
    â•‘  â”‚ ğŸ“„ Text Extraction                  â”‚        â”‚ ğŸ›¡ï¸ Secure Browser Control       â”‚  â•‘
    â•‘  â”‚ ğŸ”— Link Analysis                    â”‚        â”‚ ğŸ’ Premium Quality Results     â”‚  â•‘
    â•‘  â”‚ ğŸ“¸ Screenshot Capture               â”‚        â”‚ ğŸš€ Advanced Web Interaction    â”‚  â•‘
    â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
    â•‘                                                                                      â•‘
    â•‘           ğŸš€ Ğ¡ĞĞœĞ«Ğ™ Ğ˜ĞœĞ‘ĞĞ’Ğ«Ğ™ ĞœĞĞ”Ğ£Ğ›Ğ¬ Ğ”Ğ›Ğ¯ Ğ’ĞĞ¨Ğ•Ğ“Ğ Ğ‘ĞĞ¢Ğ! ğŸš€                             â•‘
    â•‘                                                                                      â•‘
    â•‘                   ğŸ’¯ ĞœĞĞšĞ¡Ğ˜ĞœĞĞ›Ğ¬ĞĞĞ• ĞšĞĞ§Ğ•Ğ¡Ğ¢Ğ’Ğ â€¢ Ğ˜ĞœĞ‘ĞĞ’ĞĞ¯ ĞœĞĞ©Ğ¬ ğŸ’¯                       â•‘
    â•‘                                                                                      â•‘
    â•‘                           ğŸ† BY @ZERN18I â€¢ TELEGRAM GENIUS ğŸ†                     â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
"""

import aiohttp
import asyncio
import random
import string
import re
import json
import os
import tempfile
import io
from datetime import datetime, timedelta
from telethon import functions, types, Button
from telethon.errors import FloodWaitError, PeerFloodError

# --- Ğ˜Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼ utils.py ---
# ĞŸÑ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ÑÑ, Ñ‡Ñ‚Ğ¾ utils.py Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² Ñ‚Ğ¾Ğ¹ Ğ¶Ğµ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ¸Ğ»Ğ¸ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½ Ñ‡ĞµÑ€ĞµĞ· sys.path
# Ğ•ÑĞ»Ğ¸ utils.py Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑÑ Ğ² Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒÑĞºĞ¾Ğ¹ Ğ´Ğ¸Ñ€ĞµĞºÑ‚Ğ¾Ñ€Ğ¸Ğ¸, Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ:
# import sys
# sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..')))
from .. import loader, utils # <--- Ğ£Ğ±ĞµĞ´Ğ¸Ñ‚ĞµÑÑŒ, Ñ‡Ñ‚Ğ¾ ÑÑ‚Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ° ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ° Ğ´Ğ»Ñ Ğ²Ğ°ÑˆĞµĞ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ñ‹ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ²

# --- ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ ---
try:
    import pytesseract
    from PIL import Image, ImageEnhance, ImageFilter
    OCR_ENABLED = True
except ImportError:
    OCR_ENABLED = False

try:
    import pyzbar.pyzbar as pyzbar
    QR_SCAN_ENABLED = True
except ImportError:
    QR_SCAN_ENABLED = False

try:
    from selenium import webdriver
    from selenium.webdriver.chrome.options import Options
    from selenium.webdriver.common.by import By
    from selenium.webdriver.support.ui import WebDriverWait
    from selenium.webdriver.support import expected_conditions as EC
    from selenium.common.exceptions import NoSuchElementException, TimeoutException, WebDriverException
    SELENIUM_ENABLED = True
except ImportError:
    SELENIUM_ENABLED = False

try:
    from bs4 import BeautifulSoup
    BS4_ENABLED = True
except ImportError:
    BS4_ENABLED = False

class WebSearchInteractMod(loader.Module):
    """
    ğŸ”¥ ULTIMATE WEB AUTOMATION BY ZERN18I ğŸ”¥
    
    Ğ¡Ğ°Ğ¼Ñ‹Ğ¹ Ğ¼Ğ¾Ñ‰Ğ½Ñ‹Ğ¹ Ğ¼Ğ¾Ğ´ÑƒĞ»ÑŒ Ğ´Ğ»Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°Ğ¼Ğ¸!
    âš¡ Ğ’Ğ¸Ğ·ÑƒĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº, OCR, QR-ĞºĞ¾Ğ´Ñ‹, Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°
    
    ğŸ’ PREMIUM ĞšĞĞ§Ğ•Ğ¡Ğ¢Ğ’Ğ â€¢ ĞœĞĞšĞ¡Ğ˜ĞœĞ£Ğœ Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ™ ğŸ’
    ğŸ† BY @ZERN18I â€¢ Ğ¢Ğ•Ğ›Ğ•Ğ“Ğ ĞĞœ Ğ“Ğ•ĞĞ˜Ğ™ ğŸ†
    """
    
    strings = {
        "name": "WebSearchInteract",
        "loading": "âš¡ Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ...",
        "error": "ğŸ’¥ ĞÑˆĞ¸Ğ±ĞºĞ°: {}",
        "no_dependencies": "âŒ ĞĞµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ñ‹ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ñ‹Ğµ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ¸:\n"
                           "- OCR: pip install pytesseract Pillow\n"
                           "- QR Ğ¡ĞºĞ°Ğ½ĞµÑ€: pip install pyzbar\n"
                           "- WebDriver: pip install selenium\n"
                           "- HTML ĞŸĞ°Ñ€ÑĞµÑ€: pip install beautifulsoup4",
        "processing_image": "ğŸ–¼ï¸ ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ...",
        "recognizing_text": "ğŸ”¤ Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ñ Ñ‚ĞµĞºÑÑ‚ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸...",
        "searching_google": "ğŸš€ Ğ˜Ñ‰Ñƒ Ğ² Google: '{}'...",
        "search_results": "ğŸ¯ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ´Ğ»Ñ '{}':",
        "opening_url": "ğŸŒ ĞÑ‚ĞºÑ€Ñ‹Ğ²Ğ°Ñ Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ: {}",
        "page_title": "ğŸ“„ Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº: {}",
        "page_text_excerpt": "ğŸ“ Ğ¢ĞµĞºÑÑ‚ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹:\n\n{}",
        "screenshot_taken": "ğŸ“¸ Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ²!",
        "no_text_found": "âŒ Ğ¢ĞµĞºÑÑ‚ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½",
        "no_results_found": "âŒ Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñ‹ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹",
        "browser_not_available": "âŒ Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½",
        "page_load_failed": "âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ·Ğ°Ğ³Ñ€ÑƒĞ·Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ: {}",
        "browser_closed": "âœ… Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ·Ğ°ĞºÑ€Ñ‹Ñ‚",
        "browser_not_open": "â„¹ï¸ Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ½Ğµ Ğ±Ñ‹Ğ» Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½",
        "qr_scanned": "ğŸ“± QR-ĞºĞ¾Ğ´ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½:\n\n{}",
        "qr_not_found": "âŒ QR-ĞºĞ¾Ğ´ Ğ½Ğµ Ğ¾Ğ±Ğ½Ğ°Ñ€ÑƒĞ¶ĞµĞ½ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸",
        "help_text": """
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                    ğŸ”¥ ULTIMATE WEB AUTOMATION BY ZERN18I ğŸ”¥                                                                                           â•‘
â•‘                                                           ğŸ’ PREMIUM ĞšĞĞ§Ğ•Ğ¡Ğ¢Ğ’Ğ â€¢ ĞœĞĞšĞ¡Ğ˜ĞœĞ£Ğœ Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ™ ğŸ’                                                                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                                                                                                                                          â•‘
â•‘  ğŸ” Ğ’Ğ˜Ğ—Ğ£ĞĞ›Ğ¬ĞĞ«Ğ™ ĞŸĞĞ˜Ğ¡Ğš Ğ˜ OCR:                                                                                                                                                              â•‘
â•‘    ğŸ“· .ocr (reply/file) - Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸                                                                                                                               â•‘
â•‘    ğŸ” .visualsearch (reply) - ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ                                                                                                                                      â•‘
â•‘    ğŸ“± .qrscan (reply) - Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ QR-ĞºĞ¾Ğ´                                                                                                                                              â•‘
â•‘                                                                                                                                                                                          â•‘
â•‘  ğŸŒ Ğ’Ğ•Ğ‘-ĞĞ’Ğ¢ĞĞœĞĞ¢Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯:                                                                                                                                                                   â•‘
â•‘    ğŸš€ .gsearch <Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ> - ĞŸĞ¾Ğ¸ÑĞº Ğ² Google                                                                                                                                                â•‘
â•‘    ğŸŒ .webopen <url> - ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ                                                                                                                                             â•‘
â•‘    ğŸ“¸ .webshot <url> - Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹                                                                                                                                                â•‘
â•‘    ğŸ“ .webtext <url> - ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹                                                                                                                                          â•‘
â•‘    ğŸ”— .weblinks <url> - Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ Ğ²ÑĞµ ÑÑÑ‹Ğ»ĞºĞ¸                                                                                                                                              â•‘
â•‘                                                                                                                                                                                          â•‘
â•‘  ğŸ¤– Ğ‘Ğ ĞĞ£Ğ—Ğ•Ğ -ĞĞ’Ğ¢ĞĞœĞĞ¢Ğ˜Ğ—ĞĞ¦Ğ˜Ğ¯:                                                                                                                                                               â•‘
â•‘    â–¶ï¸ .browserstart - Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€                                                                                                                                                  â•‘
â•‘    â¹ï¸ .browserstop - Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€                                                                                                                                                     â•‘
â•‘    ğŸ–±ï¸ .browserclick <ÑĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€> - ĞšĞ»Ğ¸ĞºĞ½ÑƒÑ‚ÑŒ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚                                                                                                                                        â•‘
â•‘    âŒ¨ï¸ .browsertype <ÑĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€> <Ñ‚ĞµĞºÑÑ‚> - Ğ’Ğ²ĞµÑÑ‚Ğ¸ Ñ‚ĞµĞºÑÑ‚                                                                                                                                     â•‘
â•‘    ğŸ“„ .browsereval <js_ĞºĞ¾Ğ´> - Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ JavaScript                                                                                                                                       â•‘
â•‘                                                                                                                                                                                          â•‘
â•‘  ğŸ”§ Ğ”ĞĞŸĞĞ›ĞĞ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞ«Ğ• Ğ¤Ğ£ĞĞšĞ¦Ğ˜Ğ˜:                                                                                                                                                              â•‘
â•‘    ğŸ“Š .webanalyze <url> - ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹                                                                                                                                           â•‘
â•‘    ğŸ” .websearch <ÑĞ°Ğ¹Ñ‚> <Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ> - ĞŸĞ¾Ğ¸ÑĞº Ğ½Ğ° ĞºĞ¾Ğ½ĞºÑ€ĞµÑ‚Ğ½Ğ¾Ğ¼ ÑĞ°Ğ¹Ñ‚Ğµ                                                                                                                             â•‘
â•‘    ğŸ“‹ .webforms <url> - ĞĞ°Ğ¹Ñ‚Ğ¸ Ñ„Ğ¾Ñ€Ğ¼Ñ‹ Ğ½Ğ° ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğµ                                                                                                                                         â•‘
â•‘    ğŸ¯ .webmonitor <url> - ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¹                                                                                                                                          â•‘
â•‘                                                                                                                                                                                          â•‘
â•‘  âš™ï¸ ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜:                                                                                                                                                                           â•‘
â•‘    ğŸ”§ .webconfig - ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ                                                                                                                                                     â•‘
â•‘    ğŸ“± .webproxy <proxy> - Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ĞºÑĞ¸                                                                                                                                             â•‘
â•‘    ğŸ­ .webuseragent <ua> - Ğ˜Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ User-Agent                                                                                                                                          â•‘
â•‘                                                                                                                                                                                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                            ğŸ† BY @ZERN18I â€¢ Ğ¢Ğ•Ğ›Ğ•Ğ“Ğ ĞĞœ Ğ“Ğ•ĞĞ˜Ğ™ â€¢ Ğ›Ğ£Ğ§Ğ¨Ğ˜Ğ™ Ğ ĞĞ—Ğ ĞĞ‘ĞĞ¢Ğ§Ğ˜Ğš ğŸ†                                                                                    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
        """
    }

    def __init__(self):
        self.config = loader.ModuleConfig(
            loader.ConfigValue(
                "user_agent",
                "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36",
                lambda: "User-Agent Ğ´Ğ»Ñ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°"
            ),
            loader.ConfigValue(
                "timeout",
                10,
                lambda: "Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ Ğ´Ğ»Ñ Ğ²ĞµĞ±-Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ² (ÑĞµĞºÑƒĞ½Ğ´Ñ‹)"
            ),
            loader.ConfigValue(
                "max_results",
                5,
                lambda: "ĞœĞ°ĞºÑĞ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ğ¾Ğµ ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ² Ğ¿Ğ¾Ğ¸ÑĞºĞ°"
            ),
            loader.ConfigValue(
                "screenshot_quality",
                90,
                lambda: "ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ğ¾Ğ² (1-100)"
            ),
            loader.ConfigValue(
                "proxy",
                "",
                lambda: "ĞŸÑ€Ğ¾ĞºÑĞ¸ (http://user:pass@host:port)"
            ),
        )
        self.driver = None
        self.session = None
        self.client = None # Ğ¯Ğ²Ğ½Ğ¾ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼ self.client ĞºĞ°Ğº None

    async def client_ready(self, client, db):
        """
        Ğ˜Ğ½Ğ¸Ñ†Ğ¸Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ.
        ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ¾Ğ±ÑŠĞµĞºÑ‚ ĞºĞ»Ğ¸ĞµĞ½Ñ‚Ğ° Telethon Ğ¸ ÑƒÑÑ‚Ğ°Ğ½Ğ°Ğ²Ğ»Ğ¸Ğ²Ğ°ĞµÑ‚ ĞµĞ³Ğ¾.
        """
        self.client = client
        self.db = db
        
        if self.client is None:
            print(f"[WebSearchInteract] !!! ERROR: client is None during client_ready !!!")
            # Ğ—Ğ´ĞµÑÑŒ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ±Ğ¾Ğ»ĞµĞµ Ğ°Ğ³Ñ€ĞµÑÑĞ¸Ğ²Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ğ¿Ñ‹Ñ‚ĞºÑƒ Ğ¿ĞµÑ€ĞµĞ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ,
            # Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ²Ñ‹Ğ²ĞµĞ´ĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¾Ğ± Ğ¾ÑˆĞ¸Ğ±ĞºĞµ.
            # Ğ•ÑĞ»Ğ¸ Ğ¿Ñ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ° ÑĞ²ÑĞ·Ğ°Ğ½Ğ° Ñ Heroku, ÑÑ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ğ¼ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸ĞµĞ¼.
        else:
            print(f"[WebSearchInteract] Client successfully initialized: {self.client}")
            
        self.session = aiohttp.ClientSession(
            timeout=aiohttp.ClientTimeout(total=self.config["timeout"]),
            headers={"User-Agent": self.config["user_agent"]}
        )
        
        # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ½Ğ°Ñˆ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ answer, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸Ğ·Ğ±ĞµĞ¶Ğ°Ñ‚ÑŒ ĞºÑ€Ğ°ÑˆĞ° Ğ½Ğ° ÑÑ‚Ğ¾Ğ¼ ÑÑ‚Ğ°Ğ¿Ğµ
        await self._answer_safely(None, self.strings["loading"])

    async def on_unload(self):
        """Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚Ğ¸Ğµ Ñ€ĞµÑÑƒÑ€ÑĞ¾Ğ² Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ğ³Ñ€ÑƒĞ·ĞºĞµ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ"""
        if self.session:
            await self.session.close()
        if self.driver:
            try:
                self.driver.quit()
            except Exception as e:
                print(f"[WebSearchInteract] Error quitting driver: {e}")
        self.driver = None
        self.session = None
        self.client = None # ĞÑ‡Ğ¸Ñ‰Ğ°ĞµĞ¼ ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ¿Ñ€Ğ¸ Ğ²Ñ‹Ğ³Ñ€ÑƒĞ·ĞºĞµ

    async def _answer_safely(self, message, text, reply_markup=None, **kwargs):
        """
        Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¾Ğ².
        ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚ Ğ½Ğ°Ğ»Ğ¸Ñ‡Ğ¸Ğµ self.client Ğ¿ĞµÑ€ĞµĞ´ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¾Ğ¹.
        """
        if self.client is None:
            print(f"[WebSearchInteract] !!! ERROR: Cannot send message: self.client is None. Message: {text[:100]}...")
            # Ğ’Ğ¼ĞµÑÑ‚Ğ¾ ĞºÑ€Ğ°ÑˆĞ°, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ Ğ¸Ğ»Ğ¸ Ğ»Ğ¾Ğ³Ğ¸.
            # Ğ•ÑĞ»Ğ¸ Ğ²Ñ‹ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ¸Ğ» ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğµ,
            # Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¿Ğ¾Ğ¿Ñ€Ğ¾Ğ±Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€ĞµĞ· ĞºĞ°ĞºĞ¾Ğ¹-Ğ½Ğ¸Ğ±ÑƒĞ´ÑŒ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ĞºĞ°Ğ½Ğ°Ğ»,
            # ĞµÑĞ»Ğ¸ Ğ¾Ğ½ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½, Ğ½Ğ¾ ÑÑ‚Ğ¾ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ±ĞµĞ· Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ Ñ„Ñ€ĞµĞ¹Ğ¼Ğ²Ğ¾Ñ€ĞºĞ°.
            # Ğ’ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¼ ÑĞ»ÑƒÑ‡Ğ°Ğµ, Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ²Ñ‹Ğ²Ğ¾Ğ´Ğ¸Ğ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸.
            if message:
                 # ĞŸĞ¾Ğ¿Ñ‹Ñ‚Ğ°ĞµĞ¼ÑÑ Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ñ‚ÑŒ Ğ² Ñ‡Ğ°Ñ‚, ĞµÑĞ»Ğ¸ message ĞµÑÑ‚ÑŒ, Ğ´Ğ°Ğ¶Ğµ ĞµÑĞ»Ğ¸ self.client None,
                 # ÑÑ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ¸Ğ½Ğ°Ñ‡Ğµ Ğ² utils.py, Ñ‡Ñ‚Ğ¾ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ²Ñ‹Ğ·Ğ²Ğ°Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ.
                 # ĞŸĞ¾ÑÑ‚Ğ¾Ğ¼Ñƒ Ğ»ÑƒÑ‡ÑˆĞµ ĞºĞ¾Ğ½Ñ‚Ñ€Ğ¾Ğ»Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ğ¾ Ğ·Ğ´ĞµÑÑŒ.
                 # Ğ•ÑĞ»Ğ¸ utils.answer Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ, ÑÑ‚Ğ¾Ñ‚ Ğ±Ğ»Ğ¾Ğº Ğ½Ğµ ÑÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚.
                 # Ğ›ÑƒÑ‡ÑˆĞµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ print Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸.
                 pass
            return
        
        # Ğ•ÑĞ»Ğ¸ self.client ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚, Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ ÑˆÑ‚Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑ‚Ğ¾Ğ´
        try:
            # ĞŸÑ‹Ñ‚Ğ°ĞµĞ¼ÑÑ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ utils.answer, Ğ½Ğ¾ Ğ¾Ğ½ ÑĞ°Ğ¼ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ·Ğ°Ğ²Ğ¸ÑĞµÑ‚ÑŒ Ğ¾Ñ‚ self.client
            # ĞŸĞ¾ÑÑ‚Ğ¾Ğ¼Ñƒ, ĞµÑĞ»Ğ¸ utils.answer Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ, Ğ¼Ñ‹ Ğ¿ĞµÑ€ĞµÑ…Ğ²Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµĞ¼ ĞµĞµ.
            if message:
                await utils.answer(message, text, reply_markup=reply_markup, **kwargs)
            else:
                # Ğ•ÑĞ»Ğ¸ message None, ÑÑ‚Ğ¾ Ğ¾Ğ±Ñ‹Ñ‡Ğ½Ğ¾ Ğ¾Ğ·Ğ½Ğ°Ñ‡Ğ°ĞµÑ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºÑƒ Ğ±ĞµĞ· Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ°
                # ĞŸÑ€ĞµĞ´Ğ¿Ğ¾Ğ»Ğ°Ğ³Ğ°ĞµĞ¼, Ñ‡Ñ‚Ğ¾ Ñƒ Ğ²Ğ°Ñ ĞµÑÑ‚ÑŒ ÑĞ¿Ğ¾ÑĞ¾Ğ± Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑÑ‚ÑŒ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ,
                # Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, Ñ‡ĞµÑ€ĞµĞ· self.client.send_message()
                # Ğ’ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¼ ÑĞ»ÑƒÑ‡Ğ°Ğµ, ÑÑ‚Ğ¾ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾ Ğ·Ğ°Ğ³Ğ»ÑƒÑˆĞºĞ°.
                # await self.client.send_message("me", text, reply_markup=reply_markup)
                pass
        except AttributeError as e:
            print(f"[WebSearchInteract] !!! CRITICAL ERROR in _answer_safely using utils.answer: {e}. Self.client: {self.client} !!!")
            # Ğ—Ğ´ĞµÑÑŒ Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ğ´Ñ€ÑƒĞ³Ğ°Ñ Ğ¿Ñ€Ğ¸Ñ‡Ğ¸Ğ½Ğ° Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ AttributeError, Ğ½Ğµ ÑĞ²ÑĞ·Ğ°Ğ½Ğ½Ğ°Ñ Ğ½Ğ°Ğ¿Ñ€ÑĞ¼ÑƒÑ Ñ self.client.
            # Ğ•ÑĞ»Ğ¸ utils.answer ÑĞ°Ğ¼Ğ° Ğ²Ñ‹Ğ·Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¿Ğ¾Ğ´Ğ¾Ğ±Ğ½ÑƒÑ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ, Ñ‚Ğ¾ Ğ¾Ğ½Ğ° Ğ½Ğµ Ğ·Ğ°Ñ‰Ğ¸Ñ‰ĞµĞ½Ğ°.
            # Ğ’ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¼ ÑĞ»ÑƒÑ‡Ğ°Ğµ, Ğ¼Ñ‹ Ğ¼Ğ¾Ğ¶ĞµĞ¼ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿ĞµÑ€ĞµĞ½Ğ°Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¾ÑˆĞ¸Ğ±ĞºÑƒ Ğ² ĞºĞ¾Ğ½ÑĞ¾Ğ»ÑŒ.
        except Exception as e:
            print(f"[WebSearchInteract] !!! UNEXPECTED ERROR in _answer_safely: {e}. Self.client: {self.client} !!!")

    # --- ĞŸĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµĞ¼ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ _answer_safely ---

    async def webhelpercmd(self, message):
        """ğŸ”¥ ĞŸĞ¾Ğ¼Ğ¾Ñ‰ÑŒ Ğ¿Ğ¾ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ Ğ²ĞµĞ±-Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸"""
        await self._answer_safely(message, self.strings["help_text"])

    async def ocrcmd(self, message):
        """ğŸ“· Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸"""
        if not OCR_ENABLED:
            await self._answer_safely(message, self.strings["no_dependencies"])
            return

        reply = await message.get_reply_message()
        if not reply or not reply.media:
            await self._answer_safely(message, "âŒ ĞÑ‚Ğ²ĞµÑ‚ÑŒÑ‚Ğµ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ")
            return

        await self._answer_safely(message, self.strings["processing_image"])

        try:
            file = await self.client.download_media(reply.media, bytes)
            img = Image.open(io.BytesIO(file))
            img = img.convert('RGB')
            enhancer = ImageEnhance.Contrast(img)
            img = enhancer.enhance(2.0)
            text = pytesseract.image_to_string(img, lang='rus+eng')
            
            if text.strip():
                response = f"ğŸ”¤ **Ğ Ğ°ÑĞ¿Ğ¾Ğ·Ğ½Ğ°Ğ½Ğ½Ñ‹Ğ¹ Ñ‚ĞµĞºÑÑ‚:**\n\n`{text.strip()}`"
                markup = [[Button.inline("ğŸ” ĞŸĞ¾Ğ¸ÑĞº Ğ² Google", data=f"search_{text.strip()[:50]}")] ]
                await self._answer_safely(message, response, reply_markup=markup)
            else:
                await self._answer_safely(message, self.strings["no_text_found"])
                
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def qrscancmd(self, message):
        """ğŸ“± Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ QR-ĞºĞ¾Ğ´ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¸"""
        if not QR_SCAN_ENABLED:
            await self._answer_safely(message, self.strings["no_dependencies"])
            return

        reply = await message.get_reply_message()
        if not reply or not reply.media:
            await self._answer_safely(message, "âŒ ĞÑ‚Ğ²ĞµÑ‚ÑŒÑ‚Ğµ Ğ½Ğ° Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ")
            return

        await self._answer_safely(message, "ğŸ“± Ğ¡ĞºĞ°Ğ½Ğ¸Ñ€ÑƒÑ QR-ĞºĞ¾Ğ´...")

        try:
            file = await self.client.download_media(reply.media, bytes)
            img = Image.open(io.BytesIO(file))
            qr_codes = pyzbar.decode(img)
            
            if qr_codes:
                results = []
                for qr in qr_codes:
                    data = qr.data.decode('utf-8')
                    results.append(f"ğŸ“± **Ğ¢Ğ¸Ğ¿:** {qr.type}\nğŸ”— **Ğ”Ğ°Ğ½Ğ½Ñ‹Ğµ:** `{data}`")
                
                response = self.strings["qr_scanned"].format("\n\n".join(results))
                await self._answer_safely(message, response)
            else:
                await self._answer_safely(message, self.strings["qr_not_found"])
                
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def gsearchcmd(self, message):
        """ğŸš€ ĞŸĞ¾Ğ¸ÑĞº Ğ² Google"""
        args = utils.get_args_raw(message)
        if not args:
            await self._answer_safely(message, "âŒ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ¸ÑĞºĞ¾Ğ²Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ñ€Ğ¾Ñ")
            return

        await self._answer_safely(message, self.strings["searching_google"].format(args))

        try:
            search_url = f"https://www.google.com/search?q={args}&num={self.config['max_results']}"
            
            async with self.session.get(search_url) as resp:
                html = await resp.text()
            
            if not BS4_ENABLED:
                await self._answer_safely(message, "âŒ BeautifulSoup Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½")
                return
            
            soup = BeautifulSoup(html, 'html.parser')
            results = []
            
            for i, result in enumerate(soup.find_all('div', class_='g'), 1):
                if i > self.config['max_results']:
                    break
                    
                title_elem = result.find('h3')
                link_elem = result.find('a')
                snippet_elem = result.find('span', {'data-st': True}) or result.find('div', class_='VwiC3b')
                
                if title_elem and link_elem:
                    title = title_elem.get_text()
                    link = link_elem.get('href')
                    snippet = snippet_elem.get_text() if snippet_elem else ""
                    
                    if link.startswith('/url?q='):
                        link = link.split('/url?q=')[1].split('&')[0]
                    
                    results.append(f"**{i}. {title}**\nğŸ”— {link}\nğŸ“ {snippet[:100]}...")
            
            if results:
                response = f"{self.strings['search_results'].format(args)}\n\n" + "\n\n".join(results)
                await self._answer_safely(message, response)
            else:
                await self._answer_safely(message, self.strings["no_results_found"])
                
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def webopencmd(self, message):
        """ğŸŒ ĞÑ‚ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ"""
        if not SELENIUM_ENABLED:
            await self._answer_safely(message, self.strings["no_dependencies"])
            return

        args = utils.get_args_raw(message)
        if not args:
            await self._answer_safely(message, "âŒ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ URL")
            return

        await self._answer_safely(message, self.strings["opening_url"].format(args))

        try:
            if not self.driver:
                await self._start_browser()
            
            self.driver.get(args)
            
            title = self.driver.title
            current_url = self.driver.current_url
            
            response = f"{self.strings['page_title'].format(title)}\nğŸ”— **URL:** {current_url}"
            
            markup = [
                [Button.inline("ğŸ“¸ Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚", data=f"screenshot_{current_url}")],
                [Button.inline("ğŸ“ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚", data=f"gettext_{current_url}")],
                [Button.inline("ğŸ”— ĞĞ°Ğ¹Ñ‚Ğ¸ ÑÑÑ‹Ğ»ĞºĞ¸", data=f"getlinks_{current_url}")]
            ]
            
            await self._answer_safely(message, response, reply_markup=markup)
            
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def webshotcmd(self, message):
        """ğŸ“¸ Ğ¡Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚ Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹"""
        if not SELENIUM_ENABLED:
            await self._answer_safely(message, self.strings["no_dependencies"])
            return

        args = utils.get_args_raw(message)
        if not args:
            await self._answer_safely(message, "âŒ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ URL")
            return

        await self._answer_safely(message, f"ğŸ“¸ Ğ”ĞµĞ»Ğ°Ñ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚: {args}")

        try:
            if not self.driver:
                await self._start_browser()
            
            self.driver.get(args)
            
            WebDriverWait(self.driver, 10).until(
                lambda driver: driver.execute_script("return document.readyState") == "complete"
            )
            
            screenshot = self.driver.get_screenshot_as_png()
            
            with tempfile.NamedTemporaryFile(suffix='.png', delete=False) as f:
                f.write(screenshot)
                screenshot_path = f.name
            
            # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ self.client Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ¸ Ñ„Ğ°Ğ¹Ğ»Ğ°
            if self.client:
                await self.client.send_file(
                    message.chat_id,
                    screenshot_path,
                    caption=f"ğŸ“¸ Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚: {args}",
                    reply_to=message.reply_to_msg_id
                )
            else:
                await self._answer_safely(message, "âŒ ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚: ĞºĞ»Ğ¸ĞµĞ½Ñ‚ Ğ±Ğ¾Ñ‚Ğ° Ğ½Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½.")

            await message.delete() # Ğ£Ğ´Ğ°Ğ»ÑĞµĞ¼ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ¾Ğµ Ğ¸Ğ½Ğ¸Ñ†Ğ¸Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ»Ğ¾ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñƒ
            os.unlink(screenshot_path)
            
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def webtextcmd(self, message):
        """ğŸ“ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ñ‚ĞµĞºÑÑ‚ Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹"""
        args = utils.get_args_raw(message)
        if not args:
            await self._answer_safely(message, "âŒ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ URL")
            return

        await self._answer_safely(message, f"ğŸ“ ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°Ñ Ñ‚ĞµĞºÑÑ‚: {args}")

        try:
            async with self.session.get(args) as resp:
                html = await resp.text()
            
            if not BS4_ENABLED:
                text = re.sub(r'<[^>]+>', '', html)
                text = re.sub(r'\s+', ' ', text).strip()
            else:
                soup = BeautifulSoup(html, 'html.parser')
                for script in soup(["script", "style"]):
                    script.decompose()
                text = soup.get_text()
                text = re.sub(r'\s+', ' ', text).strip()
            
            if len(text) > 4000:
                text = text[:4000] + "..."
            
            response = f"ğŸ“ **Ğ¢ĞµĞºÑÑ‚ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹:** {args}\n\n{text}"
            await self._answer_safely(message, response)
            
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def weblinkscmd(self, message):
        """ğŸ”— Ğ˜Ğ·Ğ²Ğ»ĞµÑ‡ÑŒ Ğ²ÑĞµ ÑÑÑ‹Ğ»ĞºĞ¸ Ñ Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹"""
        args = utils.get_args_raw(message)
        if not args:
            await self._answer_safely(message, "âŒ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ URL")
            return

        await self._answer_safely(message, f"ğŸ”— Ğ˜Ğ·Ğ²Ğ»ĞµĞºĞ°Ñ ÑÑÑ‹Ğ»ĞºĞ¸: {args}")

        try:
            async with self.session.get(args) as resp:
                html = await resp.text()
            
            if not BS4_ENABLED:
                links = re.findall(r'href=[\'"]?([^\'" >]+)', html)
            else:
                soup = BeautifulSoup(html, 'html.parser')
                links = [a.get('href') for a in soup.find_all('a', href=True)]
            
            valid_links = []
            for link in links:
                if link and link.startswith(('http', 'https', '/')):
                    if link.startswith('/'):
                        from urllib.parse import urljoin
                        link = urljoin(args, link)
                    valid_links.append(link)
            
            valid_links = list(set(valid_links))[:20]
            
            if valid_links:
                response = f"ğŸ”— **ĞĞ°Ğ¹Ğ´ĞµĞ½Ğ¾ ÑÑÑ‹Ğ»Ğ¾Ğº Ğ½Ğ° {args}:**\n\n"
                for i, link in enumerate(valid_links, 1):
                    response += f"{i}. {link}\n"
            else:
                response = "âŒ Ğ¡ÑÑ‹Ğ»ĞºĞ¸ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ñ‹"
            
            await self._answer_safely(message, response)
            
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def browserstartcmd(self, message):
        """â–¶ï¸ Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€"""
        if not SELENIUM_ENABLED:
            await self._answer_safely(message, self.strings["no_dependencies"])
            return

        await self._answer_safely(message, "ğŸš€ Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°Ñ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€...")

        try:
            await self._start_browser()
            await self._answer_safely(message, "âœ… Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğµ!")
            
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def browserstopcmd(self, message):
        """â¹ï¸ Ğ—Ğ°ĞºÑ€Ñ‹Ñ‚ÑŒ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€"""
        if self.driver:
            try:
                self.driver.quit()
                self.driver = None
                await self._answer_safely(message, self.strings["browser_closed"])
            except Exception as e:
                await self._answer_safely(message, self.strings["error"].format(str(e)))
        else:
            await self._answer_safely(message, self.strings["browser_not_open"])

    async def browserclickcmd(self, message):
        """ğŸ–±ï¸ ĞšĞ»Ğ¸ĞºĞ½ÑƒÑ‚ÑŒ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ"""
        if not self.driver:
            await self._answer_safely(message, "âŒ Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ .browserstart")
            return

        args = utils.get_args_raw(message)
        if not args:
            await self._answer_safely(message, "âŒ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ CSS ÑĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ°")
            return

        try:
            element = WebDriverWait(self.driver, 10).until(
                EC.element_to_be_clickable((By.CSS_SELECTOR, args))
            )
            element.click()
            await self._answer_safely(message, f"âœ… ĞšĞ»Ğ¸Ğº Ğ¿Ğ¾ ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ñƒ: {args}")
            
        except TimeoutException:
            await self._answer_safely(message, f"âŒ Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½: {args}")
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def browsertypecmd(self, message):
        """âŒ¨ï¸ Ğ’Ğ²ĞµÑÑ‚Ğ¸ Ñ‚ĞµĞºÑÑ‚ Ğ² ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚"""
        if not self.driver:
            await self._answer_safely(message, "âŒ Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ .browserstart")
            return

        args = utils.get_args_raw(message).split(maxsplit=1)
        if len(args) < 2:
            await self._answer_safely(message, "âŒ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚: .browsertype <ÑĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€> <Ñ‚ĞµĞºÑÑ‚>")
            return

        selector, text = args

        try:
            element = WebDriverWait(self.driver, 10).until(
                EC.presence_of_element_located((By.CSS_SELECTOR, selector))
            )
            element.clear()
            element.send_keys(text)
            await self._answer_safely(message, f"âœ… Ğ¢ĞµĞºÑÑ‚ Ğ²Ğ²ĞµĞ´ĞµĞ½ Ğ² {selector}")
            
        except TimeoutException:
            await self._answer_safely(message, f"âŒ Ğ­Ğ»ĞµĞ¼ĞµĞ½Ñ‚ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½: {selector}")
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def browserevalcmd(self, message):
        """ğŸ“„ Ğ’Ñ‹Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ÑŒ JavaScript Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ"""
        if not self.driver:
            await self._answer_safely(message, "âŒ Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ .browserstart")
            return

        args = utils.get_args_raw(message)
        if not args:
            await self._answer_safely(message, "âŒ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ JavaScript ĞºĞ¾Ğ´")
            return

        try:
            result = self.driver.execute_script(args)
            response = f"âœ… **JavaScript Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½:**\n```javascript\n{args}\n```\n\nğŸ“¤ **Ğ ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚:**\n`{result}`"
            await self._answer_safely(message, response)
            
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def webanalyzecmd(self, message):
        """ğŸ“Š ĞĞ½Ğ°Ğ»Ğ¸Ğ· Ğ²ĞµĞ±-ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹"""
        args = utils.get_args_raw(message)
        if not args:
            await self._answer_safely(message, "âŒ Ğ£ĞºĞ°Ğ¶Ğ¸Ñ‚Ğµ URL")
            return

        await self._answer_safely(message, f"ğŸ“Š ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒÑ: {args}")

        try:
            async with self.session.get(args) as resp:
                html = await resp.text()
                headers = dict(resp.headers)
                status = resp.status
            
            analysis = {
                "status": status,
                "size": len(html),
                "title": "",
                "meta_description": "",
                "links_count": 0,
                "images_count": 0,
                "forms_count": 0,
                "scripts_count": 0
            }
            
            if BS4_ENABLED:
                soup = BeautifulSoup(html, 'html.parser')
                title_tag = soup.find('title')
                if title_tag:
                    analysis["title"] = title_tag.get_text().strip()
                meta_desc = soup.find('meta', attrs={'name': 'description'})
                if meta_desc:
                    analysis["meta_description"] = meta_desc.get('content', '')[:100]
                analysis["links_count"] = len(soup.find_all('a'))
                analysis["images_count"] = len(soup.find_all('img'))
                analysis["forms_count"] = len(soup.find_all('form'))
                analysis["scripts_count"] = len(soup.find_all('script'))
            
            response = f"""ğŸ“Š **ĞĞ½Ğ°Ğ»Ğ¸Ğ· ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹:** {args}

ğŸ”¹ **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** {analysis['status']}
ğŸ”¹ **Ğ Ğ°Ğ·Ğ¼ĞµÑ€:** {analysis['size']} Ğ±Ğ°Ğ¹Ñ‚
ğŸ”¹ **Ğ—Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº:** {analysis['title']}
ğŸ”¹ **ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ:** {analysis['meta_description']}

ğŸ“ˆ **Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° ÑĞ»ĞµĞ¼ĞµĞ½Ñ‚Ğ¾Ğ²:**
ğŸ”— Ğ¡ÑÑ‹Ğ»ĞºĞ¸: {analysis['links_count']}
ğŸ–¼ï¸ Ğ˜Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ: {analysis['images_count']}
ğŸ“ Ğ¤Ğ¾Ñ€Ğ¼Ñ‹: {analysis['forms_count']}
âš¡ Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ñ‹: {analysis['scripts_count']}

ğŸ“¡ **ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²ĞºĞ¸:**
â€¢ Server: {headers.get('server', 'ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾')}
â€¢ Content-Type: {headers.get('content-type', 'ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾')}
â€¢ Content-Length: {headers.get('content-length', 'ĞĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ¾')}"""

            await self._answer_safely(message, response)
            
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))

    async def webconfigcmd(self, message):
        """ğŸ”§ ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ"""
        config_text = f"""âš™ï¸ **ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸ Ğ²ĞµĞ±-Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸:**

ğŸ”§ **User-Agent:** `{self.config['user_agent'][:50]}...`
â±ï¸ **Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚:** {self.config['timeout']} ÑĞµĞº
ğŸ“Š **ĞœĞ°ĞºÑ. Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğ¾Ğ²:** {self.config['max_results']}
ğŸ“¸ **ĞšĞ°Ñ‡ĞµÑÑ‚Ğ²Ğ¾ ÑĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚Ğ¾Ğ²:** {self.config['screenshot_quality']}%
ğŸŒ **ĞŸÑ€Ğ¾ĞºÑĞ¸:** {'Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½' if self.config['proxy'] else 'ĞĞµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½'}

ğŸ“š **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº:**
ğŸ”¤ OCR (Tesseract): {'âœ…' if OCR_ENABLED else 'âŒ'}
ğŸ“± QR Scanner: {'âœ…' if QR_SCAN_ENABLED else 'âŒ'}
ğŸ¤– Selenium: {'âœ…' if SELENIUM_ENABLED else 'âŒ'}
ğŸ”— BeautifulSoup: {'âœ…' if BS4_ENABLED else 'âŒ'}

ğŸ’¡ **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ `.set webconfig user_agent <Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ>` Ğ´Ğ»Ñ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ.**
ğŸ’¡ **ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€:** `.set webconfig timeout 15`
"""
        await self._answer_safely(message, config_text)

    async def setcmd(self, message):
        """âš™ï¸ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸"""
        args = utils.get_args_raw(message).split(maxsplit=2)
        if len(args) < 3:
            await self._answer_safely(message, "âŒ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚: `.set <Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ_Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ> <Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€> <Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ>`")
            return

        module_name, param, value = args

        if module_name.lower() != "webconfig":
            await self._answer_safely(message, f"âŒ ĞœĞ¾Ğ´ÑƒĞ»ÑŒ '{module_name}' Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ¸Ğ»Ğ¸ Ğ½Ğµ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºÑƒ.")
            return

        try:
            config_value = self.config.get(param)
            if config_value is None:
                await self._answer_safely(message, f"âŒ ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ '{param}' Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ² ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸.")
                return

            if isinstance(config_value.default, int):
                value = int(value)
            elif isinstance(config_value.default, float):
                value = float(value)
            elif isinstance(config_value.default, bool):
                value = value.lower() in ('true', '1', 'yes', 'y')

            self.config[param] = value
            
            if param == "user_agent" and self.session:
                self.session.close()
                self.session = aiohttp.ClientSession(
                    timeout=aiohttp.ClientTimeout(total=self.config["timeout"]),
                    headers={"User-Agent": self.config["user_agent"]}
                )
            elif param == "timeout" and self.session:
                self.session.close()
                self.session = aiohttp.ClientSession(
                    timeout=aiohttp.ClientTimeout(total=self.config["timeout"]),
                    headers={"User-Agent": self.config["user_agent"]}
                )
            elif param == "proxy" and SELENIUM_ENABLED:
                if self.driver:
                    self.driver.quit()
                    self.driver = None
                    await self._answer_safely(message, "âš ï¸ Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½ Ñ Ğ½Ğ¾Ğ²Ñ‹Ğ¼ Ğ¿Ñ€Ğ¾ĞºÑĞ¸.")
                    await self._start_browser()
                else:
                    await self._answer_safely(message, "â„¹ï¸ Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€ Ğ½Ğµ Ğ±Ñ‹Ğ» Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½. ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ¼ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ Ğ±ÑƒĞ´ĞµÑ‚ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ĞºÑĞ¸.")

            await self._answer_safely(message, f"âœ… ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ '{param}' ÑƒÑĞ¿ĞµÑˆĞ½Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½ Ğ½Ğ° '{value}'.")

        except ValueError:
            await self._answer_safely(message, f"âŒ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ '{value}' Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ° '{param}'. ĞĞ¶Ğ¸Ğ´Ğ°ĞµÑ‚ÑÑ Ñ‚Ğ¸Ğ¿: {type(config_value.default).__name__}")
        except Exception as e:
            await self._answer_safely(message, self.strings["error"].format(str(e)))


    async def _start_browser(self):
        """Ğ—Ğ°Ğ¿ÑƒÑĞºĞ°ĞµÑ‚ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€ Selenium"""
        if not SELENIUM_ENABLED:
            raise RuntimeError(self.strings["no_dependencies"])

        if self.driver:
            return

        chrome_options = Options()
        chrome_options.add_argument("--headless")
        chrome_options.add_argument("--no-sandbox")
        chrome_options.add_argument("--disable-dev-shm-usage")
        chrome_options.add_argument("--window-size=1920,1080")
        chrome_options.add_argument("--disable-gpu")
        chrome_options.add_argument(f"--user-agent={self.config['user_agent']}")
        
        if self.config["proxy"]:
            proxy_parts = self.config["proxy"].split('://')
            if len(proxy_parts) == 2:
                proxy_type = proxy_parts[0]
                proxy_address = proxy_parts[1]
                if proxy_type == "http":
                    chrome_options.add_argument(f'--proxy-server={self.config["proxy"]}')
                elif proxy_type == "socks5":
                    # Ğ”Ğ»Ñ SOCKS5 Ğ¼Ğ¾Ğ¶ĞµÑ‚ Ğ¿Ğ¾Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ñ‚ÑŒÑÑ Ğ´Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ°Ñ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Ğ¸Ğ»Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ñ
                    # Ğ’ Ğ´Ğ°Ğ½Ğ½Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğµ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ Ğ¿Ñ€Ğ¾ÑÑ‚Ğ¾Ğ¹ HTTP Ğ¿Ñ€Ğ¾ĞºÑĞ¸
                    pass # TODO: Ğ ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºÑƒ SOCKS5
            else:
                await self._answer_safely(None, "âš ï¸ ĞĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¿Ñ€Ğ¾ĞºÑĞ¸. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ http://user:pass@host:port") # ĞÑ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° Ğ±ĞµĞ· message, ĞµÑĞ»Ğ¸ Ñ‡Ñ‚Ğ¾

        try:
            loop = asyncio.get_running_loop()
            # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ run_in_executor Ğ´Ğ»Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€ÑƒÑÑ‰ĞµĞ³Ğ¾ ĞºĞ¾Ğ´Ğ° Ğ² Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ğ¾Ğ¼ Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞµ
            # Ğ­Ñ‚Ğ¾ Ğ¿Ñ€ĞµĞ´Ğ¾Ñ‚Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ±Ğ»Ğ¾ĞºĞ¸Ñ€Ğ¾Ğ²ĞºÑƒ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ asyncio.
            self.driver = await loop.run_in_executor(None, webdriver.Chrome, chrome_options)
            self.driver.set_page_load_timeout(self.config["timeout"])
        except WebDriverException as e:
            raise RuntimeError(f"ĞĞµ ÑƒĞ´Ğ°Ğ»Ğ¾ÑÑŒ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ ChromeDriver: {e}")
        except Exception as e:
            raise RuntimeError(f"ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿Ñ€Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞºĞµ Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°: {e}")

    async def watcher(self, call):
        """ĞĞ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸Ğº inline-ĞºĞ½Ğ¾Ğ¿Ğ¾Ğº"""
        if not hasattr(call, 'data') or call.data is None:
            return
            
        data = call.data.decode('utf-8')
        user_id = call.sender_id
        
        try:
            if data.startswith("search_"):
                query = data.split("_", 1)[1]
                # ĞŸĞµÑ€ĞµĞ´Ğ°ĞµĞ¼ ĞºĞ¾Ğ¿Ğ¸Ñ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ¸ ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾
                await self.gsearchcmd(utils.CopyMessage(message=call.message, text=f".gsearch {query}"))
                await call.answer("ĞŸĞ¾Ğ¸ÑĞº Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½!")
            elif data.startswith("screenshot_"):
                url = data.split("_", 1)[1]
                await self.webshotcmd(utils.CopyMessage(message=call.message, text=f".webshot {url}"))
                await call.answer("Ğ¡ĞºÑ€Ğ¸Ğ½ÑˆĞ¾Ñ‚ ÑĞ´ĞµĞ»Ğ°Ğ½!")
            elif data.startswith("gettext_"):
                url = data.split("_", 1)[1]
                await self.webtextcmd(utils.CopyMessage(message=call.message, text=f".webtext {url}"))
                await call.answer("Ğ¢ĞµĞºÑÑ‚ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½!")
            elif data.startswith("getlinks_"):
                url = data.split("_", 1)[1]
                await self.weblinkscmd(utils.CopyMessage(message=call.message, text=f".weblinks {url}"))
                await call.answer("Ğ¡ÑÑ‹Ğ»ĞºĞ¸ Ğ¸Ğ·Ğ²Ğ»ĞµÑ‡ĞµĞ½Ñ‹!")
        except Exception as e:
            # Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµĞ¼ _answer_safely Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¾ÑˆĞ¸Ğ±Ğ¾Ğº Ğ² watcher
            await self._answer_safely(call.message, f"ğŸ”¥ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‡Ğ¸ĞºĞµ ĞºĞ½Ğ¾Ğ¿ĞºĞ¸: {str(e)}")
            await call.answer(f"ğŸ”¥ ĞÑˆĞ¸Ğ±ĞºĞ°: {str(e)}") # ĞÑ‚Ğ²ĞµÑ‡Ğ°ĞµĞ¼ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ½Ğ° ĞºĞ½Ğ¾Ğ¿ĞºÑƒ


